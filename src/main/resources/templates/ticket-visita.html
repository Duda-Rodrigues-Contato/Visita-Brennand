<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Seu Ticket - Gestão Viva</title>
    <link rel="icon" th:href="@{/img/1.png}" type="image/x-icon" />
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <style>
        .ticket-container {
            max-width: 500px; margin: 40px auto; background: white;
            border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            overflow: hidden; text-align: center;
        }
        .ticket-header { background-color: var(--verde-principal); color: white; padding: 20px; }
        .ticket-body { padding: 30px; }
        .qr-code-img { border: 5px solid #f4f7f6; border-radius: 8px; margin: 20px 0; }
        .info-row { margin: 10px 0; font-size: 1.1rem; border-bottom: 1px solid #eee; padding-bottom: 5px;}
        .print-btn { margin-top: 20px; background-color: var(--texto-escuro); }
    </style>
</head>
<body>
    <header class="header">
        <div class="header__container">
            <a href="/status-parque" class="brand">
                <img th:src="@{/img/1.png}" class="brand__logo" /> <span>Gestão Viva</span>
            </a>
        </div>
    </header>

    <div class="ticket-container">
        <div class="ticket-header">
            <h2>Ticket de Entrada</h2>
            <p>Apresente este código na portaria.</p>
        </div>
        
        <div class="ticket-body">
            <div class="info-row">
                <strong>Visitante:</strong> <span th:text="${visita.nomeResponsavel}">Nome</span>
            </div>
            <div class="info-row">
                <strong>Data:</strong> <span th:text="${#temporals.format(visita.dataVisita, 'dd/MM/yyyy')}">Data</span>
            </div>
            <div class="info-row">
                <strong>Horário:</strong> <span th:text="${visita.horarioChegada}">Horário</span>
            </div>
            <div class="info-row">
                <strong>Pessoas:</strong> <span th:text="${visita.numeroVisitantes}">1</span>
            </div>

            <img th:src="${'data:image/png;base64,' + qrCode}" alt="QR Code do Ticket" class="qr-code-img" />
            
            <p style="font-size: 0.9rem; color: #777;">ID da Visita: <span th:text="${visita.id}">#</span></p>

            <button onclick="window.print()" class="btn print-btn">Imprimir / Salvar PDF</button>
        </div>
    </div>
</body>
</html>